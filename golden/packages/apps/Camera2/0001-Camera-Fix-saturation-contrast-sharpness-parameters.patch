From 4feee1e9ff3cd536140eb085cf0a9c6e2d14b0c6 Mon Sep 17 00:00:00 2001
From: Ethan Chen <intervigil@gmail.com>
Date: Wed, 5 Feb 2014 23:02:17 -0800
Subject: [PATCH] Camera: Fix saturation, contrast, sharpness parameters

* Old-style QCOM HALs use <setting>-max, new style HALs use
  max-<setting> for these parameters.

Change-Id: I2db310ea3a1da351414ce15c90f4444721146f36
---
 src/com/android/camera/CameraSettings.java | 6 +++---
 src/com/android/camera/PhotoModule.java    | 6 +++---
 2 files changed, 6 insertions(+), 6 deletions(-)

diff --git a/src/com/android/camera/CameraSettings.java b/src/com/android/camera/CameraSettings.java
index cbd9458..9b34fb5 100644
--- a/src/com/android/camera/CameraSettings.java
+++ b/src/com/android/camera/CameraSettings.java
@@ -394,17 +394,17 @@ public class CameraSettings {
         }
 
         if (contrast != null && !CameraUtil.isSupported(mParameters, "contrast") &&
-                !CameraUtil.isSupported(mParameters, "contrast-max")) {
+                !CameraUtil.isSupported(mParameters, "max-contrast")) {
             removePreference(group, contrast.getKey());
         }
 
         if (sharpness != null && !CameraUtil.isSupported(mParameters, "sharpness") &&
-                !CameraUtil.isSupported(mParameters, "sharpness-max")) {
+                !CameraUtil.isSupported(mParameters, "max-sharpness")) {
             removePreference(group, sharpness.getKey());
         }
 
         if (saturation != null && !CameraUtil.isSupported(mParameters, "saturation") &&
-                !CameraUtil.isSupported(mParameters, "saturation-max")) {
+                !CameraUtil.isSupported(mParameters, "max-saturation")) {
             removePreference(group, saturation.getKey());
         }
 
diff --git a/src/com/android/camera/PhotoModule.java b/src/com/android/camera/PhotoModule.java
index 009a15b..39134e0 100644
--- a/src/com/android/camera/PhotoModule.java
+++ b/src/com/android/camera/PhotoModule.java
@@ -2274,7 +2274,7 @@ public class PhotoModule
         }
         //Set Saturation
         if (CameraUtil.isSupported(mParameters, "saturation") &&
-                CameraUtil.isSupported(mParameters, "saturation-max")) {
+                CameraUtil.isSupported(mParameters, "max-saturation")) {
             String saturationStr = mPreferences.getString(
                     CameraSettings.KEY_SATURATION,
                     mActivity.getString(R.string.pref_camera_saturation_default));
@@ -2286,7 +2286,7 @@ public class PhotoModule
         }
         // Set contrast parameter.
         if (CameraUtil.isSupported(mParameters, "contrast") &&
-                CameraUtil.isSupported(mParameters, "contrast-max")) {
+                CameraUtil.isSupported(mParameters, "max-contrast")) {
             String contrastStr = mPreferences.getString(
                     CameraSettings.KEY_CONTRAST,
                     mActivity.getString(R.string.pref_camera_contrast_default));
@@ -2298,7 +2298,7 @@ public class PhotoModule
         }
         // Set sharpness parameter
         if (CameraUtil.isSupported(mParameters, "sharpness") &&
-                CameraUtil.isSupported(mParameters, "sharpness-max")) {
+                CameraUtil.isSupported(mParameters, "max-sharpness")) {
             String sharpnessStr = mPreferences.getString(
                     CameraSettings.KEY_SHARPNESS,
                     mActivity.getString(R.string.pref_camera_sharpness_default));
-- 
2.7.4

