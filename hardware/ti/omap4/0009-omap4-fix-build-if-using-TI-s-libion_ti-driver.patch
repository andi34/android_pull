From 397eaff44e159031ac0bd640501ce0c09236852f Mon Sep 17 00:00:00 2001
From: Andreas Blaesius <skate4life@gmx.de>
Date: Mon, 6 Jun 2016 14:03:36 +0200
Subject: [PATCH 09/18] omap4: fix build if using TI's libion_ti driver

Change-Id: I5114167a5653eefd984f7a4d9d1b1da417ec5767
---
 hwc/hwc.c | 5 +++++
 1 file changed, 5 insertions(+)

diff --git a/hwc/hwc.c b/hwc/hwc.c
index 9ee620a..b30ebf4 100644
--- a/hwc/hwc.c
+++ b/hwc/hwc.c
@@ -1586,7 +1586,12 @@ static int free_tiler2d_buffers(omap_hwc_device_t *hwc_dev)
     int i;
 
     for (i = 0 ; i < NUM_EXT_DISPLAY_BACK_BUFFERS; i++) {
+#ifdef USE_TI_LIBION
+        ion_free(hwc_dev->ion_fd, hwc_dev->ion_handles[i]);
+#else
         ion_free(hwc_dev->ion_fd, (ion_user_handle_t) hwc_dev->ion_handles[i]);
+#endif
+
         hwc_dev->ion_handles[i] = NULL;
     }
     return 0;
-- 
2.7.4

