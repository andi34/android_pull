From a7d027e73c909fae81cd3398032faae1912ad2ea Mon Sep 17 00:00:00 2001
From: Kyle Repinski <repinski23@gmail.com>
Date: Sun, 28 Feb 2016 14:59:52 -0600
Subject: [PATCH 05/18] hwc: dock_image: Prevent setjmp corruption in
 load_png_image.

Change-Id: I2d731fcea882de5a1682758d52b0ec0efad20f92
---
 hwc/dock_image.c | 2 +-
 1 file changed, 1 insertion(+), 1 deletion(-)

diff --git a/hwc/dock_image.c b/hwc/dock_image.c
index 55c907d..6626fa7 100644
--- a/hwc/dock_image.c
+++ b/hwc/dock_image.c
@@ -48,7 +48,7 @@ static void free_png_image(image_info_t *img)
 static int load_png_image(char *path, image_info_t *img)
 {
     void *ptr = NULL;
-    png_bytepp row_pointers = NULL;
+    static png_bytepp row_pointers = NULL; /* static prevents setjmp corruption. */
 
     FILE *fd = fopen(path, "rb");
     if (!fd) {
-- 
2.7.4

