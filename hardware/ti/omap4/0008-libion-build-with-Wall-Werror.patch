From 8276bbfd397c2a4aa930c2b83d88547d773faabf Mon Sep 17 00:00:00 2001
From: Ziyan <jaraidaniel@gmail.com>
Date: Sat, 4 Jun 2016 13:15:41 +0200
Subject: [PATCH 08/13] libion: build with -Wall -Werror

Change-Id: I633d17b3f6aa51a3ea5c0e37c5a20a0b43db8dcf
---
 hwc/hwc.c              | 2 +-
 libion/ion_ti_custom.c | 3 ++-
 libion/ion_ti_custom.h | 2 +-
 3 files changed, 4 insertions(+), 3 deletions(-)

diff --git a/hwc/hwc.c b/hwc/hwc.c
index a4ff5a4..9ee620a 100644
--- a/hwc/hwc.c
+++ b/hwc/hwc.c
@@ -1586,7 +1586,7 @@ static int free_tiler2d_buffers(omap_hwc_device_t *hwc_dev)
     int i;
 
     for (i = 0 ; i < NUM_EXT_DISPLAY_BACK_BUFFERS; i++) {
-        ion_free(hwc_dev->ion_fd, hwc_dev->ion_handles[i]);
+        ion_free(hwc_dev->ion_fd, (ion_user_handle_t) hwc_dev->ion_handles[i]);
         hwc_dev->ion_handles[i] = NULL;
     }
     return 0;
diff --git a/libion/ion_ti_custom.c b/libion/ion_ti_custom.c
index 05fbb1e..7208c1a 100644
--- a/libion/ion_ti_custom.c
+++ b/libion/ion_ti_custom.c
@@ -19,6 +19,7 @@
  *
  */
 #include <cutils/log.h>
+#include <string.h>
 #include <errno.h>
 #include <fcntl.h>
 #include <stdio.h>
@@ -43,7 +44,7 @@ static int ion_ioctl(int fd, int req, void *arg)
 
 
 int ion_alloc_tiler(int fd, size_t w, size_t h, int fmt, unsigned int flags,
-            ion_user_handle_t*handle, size_t *stride)
+            struct ion_handle **handle, size_t *stride)
 {
         int ret;
         struct omap_ion_tiler_alloc_data alloc_data = {
diff --git a/libion/ion_ti_custom.h b/libion/ion_ti_custom.h
index dc2fdf3..fc1bec4 100644
--- a/libion/ion_ti_custom.h
+++ b/libion/ion_ti_custom.h
@@ -6,7 +6,7 @@
 __BEGIN_DECLS
 
 int ion_alloc_tiler(int fd, size_t w, size_t h, int fmt, unsigned int flags,
-            ion_user_handle_t*handle, size_t *stride);
+            struct ion_handle **handle, size_t *stride);
 
 __END_DECLS
 
-- 
2.7.4

