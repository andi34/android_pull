From 838827d3794c4aacdf8b2217531a70583e71c72b Mon Sep 17 00:00:00 2001
From: Andreas Blaesius <skate4life@gmx.de>
Date: Sat, 25 Nov 2017 20:31:42 +0100
Subject: [PATCH] Superuser: use AOSP "su" if exist

Change-Id: I3bd1aaa143d91844724cec8d16e651e73a20a014
---
 Android.mk | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

diff --git a/Android.mk b/Android.mk
index f4fad43..98c2a49 100644
--- a/Android.mk
+++ b/Android.mk
@@ -1,6 +1,8 @@
+# Use AOSP "su" if exist
+ifeq (,$(strip $(wildcard system/extras/su/su.c)))
+
 # Root AOSP source makefile
 # su is built here, and 
-
 my_path := $(call my-dir)
 
 ifdef SUPERUSER_EMBEDDED
@@ -67,3 +69,4 @@ ALL_MODULES.$(LOCAL_MODULE).INSTALLED := \
     $(ALL_MODULES.$(LOCAL_MODULE).INSTALLED) $(SUPERUSER_RC) $(SUPERUSER_MARKER)
 
 endif
+endif
-- 
2.7.4

